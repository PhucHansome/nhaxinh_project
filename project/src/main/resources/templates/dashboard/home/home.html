<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Dashboard | Uplon - Responsive Bootstrap 4 Admin Dashboard</title>
    <th:block th:replace="/dashboard/layout/header::header"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <style type="text/css">
        .chartBox {
            width: 300px;

        }
    </style>
</head>

<body>

<!-- Begin page -->
<div id="wrapper">


    <!-- Topbar Start -->
    <th:block th:replace="/dashboard/layout/navbar/navbar::navbar"/>
    <!-- end Topbar -->


    <!-- ========== Left Sidebar Start ========== -->
    <th:block th:replace="/dashboard/layout/left-side-menu::left-side-menu"/>
    <!-- Left Sidebar End -->

    <!-- ============================================================== -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->

    <div class="content-page">
        <div class="content">

            <!-- Start Content-->
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Uplon</a></li>
                                    <li class="breadcrumb-item active">Dashboard</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Dashboard</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->
                <div class="row alertshow"></div>

                <div class="row ">
                    <div class="col-md-6 col-xl-3">
                        <div th:object="${order}" class="card-box tilebox-one first_content">
                            <i class="icon-layers float-right m-0 h2 text-muted"></i>
                            <h6 class="text-muted text-uppercase mt-0">Orders</h6>
                            <h3 class="my-3" data-plugin="counterup" th:text="${order}"></h3>
                            <span class="badge badge-success mr-1"> +11% </span> <span class="text-muted">From previous period</span>
                        </div>
                    </div>

                    <div class="col-md-6 col-xl-3">
                        <div th:object="${customer}" class="card-box tilebox-one">
                            <i class="icon-paypal float-right m-0 h2 text-muted"></i>
                            <h6 class="text-muted text-uppercase mt-0">Khách hàng</h6>
                            <h3 class="my-3"><span data-plugin="counterup" th:text="${customer}"></span></h3>
                            <span class="badge badge-danger mr-1"> -29% </span> <span class="text-muted">From previous period</span>
                        </div>
                    </div>

                    <div class="col-md-6 col-xl-3">
                        <div th:object="${totalOrder}" class="card-box tilebox-one">
                            <i class="icon-chart float-right m-0 h2 text-muted"></i>
                            <h6 class="text-muted text-uppercase mt-0">Tổng tiền toàn bộ đơn hàng</h6>
                            <h3 class="my-3"><span  th:text="${#numbers.formatCurrency(totalOrder)}"></span></h3>
                            <span class="badge badge-pink mr-1"> 0% </span> <span class="text-muted">From previous period</span>
                        </div>
                    </div>

                    <div class="col-md-6 col-xl-3">
                        <div th:object="${totalProductSize}" class="card-box tilebox-one">
                            <i class="icon-rocket float-right m-0 h2 text-muted"></i>
                            <h6 class="text-muted text-uppercase mt-0">Tổng số lượng sản phẩm</h6>
                            <h3 class="my-3" data-plugin="counterup" th:text="${totalProductSize}">1,890</h3>
                            <span class="badge badge-warning mr-1"> +89% </span> <span class="text-muted">Last year</span>
                        </div>
                    </div>
                </div>
                <!-- end row -->


                <div class="row">
                    <div class="col-lg-6 col-xl-8">
                        <div class="card-box">
                            <h4 class="header-title mb-3">Sales Statistics</h4>

                            <div class="text-center">
                                <ul class="list-inline chart-detail-list mb-0">
                                    <li class="list-inline-item">
                                        <h6 class="text-info"><i class="mdi mdi-circle-outline mr-1"></i>Series A</h6>
                                    </li>
                                    <li class="list-inline-item">
                                        <h6 class="text-success"><i class="mdi mdi-triangle-outline mr-1"></i>Series B</h6>
                                    </li>
                                    <li class="list-inline-item">
                                        <h6 class="text-muted"><i class="mdi mdi-square-outline mr-1"></i>Series C</h6>
                                    </li>
                                </ul>
                            </div>

                            <div id="morris-bar-stacked" class="morris-chart" style="height: 320px;"></div>

                        </div>
                    </div><!-- end col-->

                    <div class="col-lg-6 col-xl-4">
                        <div class="card-box">




                        </div>
                    </div><!-- end col-->
                </div>
                <!-- end row -->


                <div class="row">
                    <div class="col-xl-7">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card-box">
                                    <h4 class="header-title mb-3">Inbox</h4>

                                    <div class="inbox-widget slimscroll" style="max-height: 324px;">
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-1.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Chadengle</p>
                                                <p class="inbox-item-text">Hey! there I'm available...</p>
                                                <p class="inbox-item-date">13:40 PM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-2.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Tomaslau</p>
                                                <p class="inbox-item-text text-truncate">I've finished it! See you so...</p>
                                                <p class="inbox-item-date">13:34 PM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-3.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Stillnotdavid</p>
                                                <p class="inbox-item-text">This theme is awesome!</p>
                                                <p class="inbox-item-date">13:17 PM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-4.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Kurafire</p>
                                                <p class="inbox-item-text">Nice to meet you</p>
                                                <p class="inbox-item-date">12:20 PM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-5.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Shahedk</p>
                                                <p class="inbox-item-text">Hey! there I'm available...</p>
                                                <p class="inbox-item-date">10:15 AM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-6.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Adhamdannaway</p>
                                                <p class="inbox-item-text">This theme is awesome!</p>
                                                <p class="inbox-item-date">9:56 AM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-8.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Arashasghari</p>
                                                <p class="inbox-item-text">Hey! there I'm available...</p>
                                                <p class="inbox-item-date">10:15 AM</p>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="inbox-item">
                                                <div class="inbox-item-img"><img src="assets_dashboard/assets/images/users/avatar-9.jpg" class="rounded-circle" alt=""></div>
                                                <p class="inbox-item-author">Joshaustin</p>
                                                <p class="inbox-item-text">I've finished it! See you so...</p>
                                                <p class="inbox-item-date">9:56 AM</p>
                                            </div>
                                        </a>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card-box">
                                    <h4 class="header-title mb-3">Sales Statistics</h4>

                                    <p class="font-weight-semibold mb-3">iMacs <span class="text-danger float-right"><b>78%</b></span></p>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 78%" aria-valuenow="78" aria-valuemin="0" aria-valuemax="78"></div>
                                    </div>
                                </div>

                                <div class="card-box">
                                    <h4 class="header-title mb-3">Monthly Sales</h4>

                                    <p class="font-weight-semibold mb-2">Macbooks <span class="text-success float-right"><b>25%</b></span></p>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>

                                <div class="card-box">
                                    <h4 class="header-title mb-3">Daily Sales</h4>

                                    <p class="font-weight-semibold mb-2">Mobiles <span class="text-warning float-right"><b>75%</b></span></p>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div><!-- end col-->

                    <div class="col-xl-5">
                        <div class="card-box">

                            <h4 class="header-title mb-3">Top Contracts</h4>

                            <div class="table-responsive">
                                <table class="table table-bordered table-nowrap mb-0">
                                    <thead>
                                    <tr>
                                        <th>Company</th>
                                        <th>Start Date</th>
                                        <th>End Date</th>
                                        <th>Status</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <th class="text-muted">Apple Technology</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-success">Paid</span></td>
                                    </tr>
                                    <tr>
                                        <th class="text-muted">Envato Pty Ltd.</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-danger">Unpaid</span></td>
                                    </tr>
                                    <tr>
                                        <th class="text-muted">Dribbble LLC.</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-success">Paid</span></td>
                                    </tr>
                                    <tr>
                                        <th class="text-muted">Adobe Family</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-success">Paid</span></td>
                                    </tr>
                                    <tr>
                                        <th class="text-muted">Apple Technology</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-danger">Unpaid</span></td>
                                    </tr>
                                    <tr>
                                        <th class="text-muted">Envato Pty Ltd.</th>
                                        <td>20/02/2014</td>
                                        <td>19/02/2020</td>
                                        <td><span class="badge badge-success">Paid</span></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div><!-- end col-->

                </div>
                <!-- end row -->

            </div> <!-- end container-fluid -->
        <div class="row">
            <div class="col-lg-6 col-xl-4">
            <div class="chartBox">
                <canvas id="myChart"></canvas>

            </div>


            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            <!-- <script> -->
            <!-- // config
           const ctx = document.getElementById('myChart').getContext('2d');
           const myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            // setup
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: { }
    }); -->
            </script>
            <script>
                var xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
                var yValues = [55, 49, 44, 24, 15];
                var barColors = [
                    "#b91d47",
                    "#00aba9",
                    "#2b5797",
                    "#e8c3b9",
                    "#1e7145"
                ];

                new Chart("myChart", {
                    type: "pie",
                    data: {
                        labels: xValues,
                        datasets: [{
                            backgroundColor: barColors,
                            data: yValues
                        }]
                    },
                    options: {
                        title: {
                            display: true,
                            text: "World Wide Wine Production 2018"
                        }
                    }
                });
            </script>
        </div>
        </div>
        </div> <!-- end content -->



        <!-- Footer Start -->
        <th:block th:replace="/dashboard/layout/footer::footer"/>
        <!-- end Footer -->

    </div>

    <!-- ============================================================== -->
    <!-- End Page content -->
    <!-- ============================================================== -->

</div>
<!-- END wrapper -->

<!-- Right Sidebar -->

<!-- Vendor js -->
<th:block th:replace="/dashboard/layout/script/script::script"/>

<script>
    let page = {
        url: {
            GetOrderDetail: App.BASE_URL_ORDER + "/order-detail/findAll/",
            GetOrderDetailBySTT: App.BASE_URL_ORDER + "/order-detail/status/",
            GetOrder: App.BASE_URL_ORDER + "/order/getOrder/",
            PutOrderDetailCheckOut: App.BASE_URL_ORDER + "/order-detail/checkout/",
            PutOrderDetailCancel : App.BASE_URL_ORDER + "/order-detail/cancel/"
        },
        element: {},
        loadData: {},
        commands: {},
        dialogs: {
            element: {},
            loadData: {},
            commands: {},
            close: {},
            alertDanger: {},
            inputError: {}
        }
    }

    let order = new Order();
    let orderDetail = new OrderDetail();
    let customerInfo = new CustomerInfo();
    let locationRegion = new LocationRegion();

    page.element.first_content = $(".first_content")

    page.commands.getAllorder = () =>{
        $.ajax({
            "method": "GET",
            "url": page.url.GetOrderDetail,
        }).done((data)=>{
            console.log(data);
            page.commands.getOrderDetailShowAlert()
        }).fail((e)=>{
            console.log(e)
        })
    }

    page.commands.getOrderDetailShowAlert = () => {
        $.ajax({
            "method": "GET",
            "url": page.url.GetOrderDetailBySTT,
        }).done((data)=>{
            if (data.length === 0){return}
            $(".alertshow").html("")
            let str = `
            <div class="alert alert-danger fixed-bottom" role="alert">
  Bạn đang có ${data.length} Đơn hàng Chưa xử lý <a href="/order-dashboard" class="alert-link">Nhấn vào đây</a> để vào trang order.
</div>
            `
            $(".alertshow").append(str)
        })
    }


    $(function(){
        page.commands.getAllorder()
    })


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>